<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>CoinCodeRD Game</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 0;
        padding: 0;
        background: #f0f0f0;
      }
      
      /* Phần nhập tên */
      #inputArea {
        margin-top: 50px;
      }
      
      /* Phần game (sẽ hiện sau khi xác nhận tên) */
      #gameArea {
        display: none;
        margin-top: 50px;
      }
      
      /* Thông tin người chơi */
      #playerInfo {
        margin-bottom: 20px;
        font-size: 24px;
        font-weight: bold;
      }
      
      /* Hộp quà */
      #giftBox {
        width: 200px;
        height: 200px;
        margin: 0 auto;
        position: relative;
        border: 2px solid #444;
        border-radius: 10px;
        background: #ddd;
      }
      
      /* Nắp hộp */
      .lid {
        width: 100%;
        height: 50px;
        background: #ccc;
        position: absolute;
        top: 0;
        left: 0;
        transition: transform 0.5s ease;
      }
      
      /* Thân hộp */
      .box {
        width: 100%;
        height: 150px;
        background: #eee;
        position: absolute;
        bottom: 0;
        left: 0;
      }
      
      /* Biểu tượng kết quả (tick hoặc X) chồng lên hộp quà */
      #resultIcon {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 80px;
        font-weight: bold;
        display: none;
        z-index: 10;
      }
      
      button {
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
        margin: 10px;
      }
      
      /* Phần quảng cáo */
      #adArea {
        display: none;
        margin-top: 20px;
      }
      
      #adBanner {
        width: 300px;
        margin: 0 auto;
        padding: 15px;
        border: 2px solid #888;
        border-radius: 5px;
        background: #fff;
      }
    </style>
  </head>
  <body>
    <!-- PHẦN NHẬP TÊN -->
    <div id="inputArea">
      <input type="text" id="playerName" placeholder="Nhập tên Minecraft của bạn">
      <br>
      <button id="confirmBtn" onclick="saveName()">Xác nhận Tên</button>
    </div>
    
    <!-- PHẦN GAME: SẼ HIỆN SAU KHI NGƯỜI DÙNG XÁC NHẬN TÊN -->
    <div id="gameArea">
      <div id="playerInfo">
        <span id="displayName"></span>
      </div>
      
      <!-- Hộp quà với nắp (.lid), thân hộp (.box) và phần hiển thị kết quả (#resultIcon) -->
      <div id="giftBox">
        <div class="lid"></div>
        <div class="box"></div>
        <div id="resultIcon"></div>
      </div>
      
      <!-- Các nút thao tác -->
      <div>
        <!-- Nút mở quà: truyền tham số true (thắng) hoặc false (thua) theo kết quả game -->
        <button onclick="spinSlot(true)">Mở Quà (Thắng)</button>
        <button onclick="spinSlot(false)">Mở Quà (Thua)</button>
      </div>
      
      <!-- Nút xem quảng cáo -->
      <div>
        <button onclick="watchAd()">Xem Quảng Cáo</button>
      </div>
      
      <!-- Phần banner quảng cáo -->
      <div id="adArea">
        <div id="adBanner">
          <p>Đây là banner quảng cáo của bạn.</p>
          <p>Cập nhật nội dung quảng cáo ở đây.</p>
        </div>
      </div>
    </div>
    
    <script>
      // Hàm xác nhận tên: Khi người dùng bấm "Xác nhận Tên", tên được hiển thị và phần game hiện ra
      function saveName() {
        var name = document.getElementById("playerName").value.trim();
        if (!name) {
          alert("❗ Vui lòng nhập tên Minecraft.");
          return;
        }
        document.getElementById("displayName").innerText = name;
        document.getElementById("inputArea").style.display = "none";
        document.getElementById("gameArea").style.display = "block";
      }
      
      /*
        Hàm spinSlot nhận một tham số Boolean (gameResult):
          - true: thắng → hiển thị tick (✅, màu xanh)
          - false: thua → hiển thị X (❌, màu đỏ)
        Hiệu ứng: nắp hộp quay và sau 500ms, kết quả sẽ hiển thị chồng lên hộp quà.
      */
      function spinSlot(gameResult) {
        var resultIcon = document.getElementById("resultIcon");
        // Reset nắp hộp về trạng thái khép
        document.querySelector(".lid").style.transform = "rotate(0deg)";
        resultIcon.style.display = "none";
        // Sau 500ms, mở nắp hộp và hiển thị kết quả
        setTimeout(function() {
          document.querySelector(".lid").style.transform = "rotate(-45deg)";
          if (gameResult) {
            resultIcon.innerText = "✅";
            resultIcon.style.color = "green";
          } else {
            resultIcon.innerText = "❌";
            resultIcon.style.color = "red";
          }
          resultIcon.style.display = "block";
        }, 500);
      }
      
      /*
        Hàm watchAd: Khi người dùng bấm "Xem Quảng Cáo"
          - Hiển thị banner quảng cáo trong 5 giây,
          - Sau đó ẩn banner và gửi thông báo qua Discord.
      */
      function watchAd() {
        var adArea = document.getElementById("adArea");
        adArea.style.display = "block";
        // Giả lập thời gian xem quảng cáo (5 giây)
        setTimeout(function() {
          adArea.style.display = "none";
          var name = document.getElementById("displayName").innerText || "Người chơi";
          // Gửi thông báo qua Discord – thay thế webhook URL bên dưới bằng URL thật của bạn.
          notifyDiscord(name + " vừa xem quảng cáo.");
        }, 5000);
      }
      
      /*
        Hàm notifyDiscord gửi thông báo tới Discord thông qua webhook.
        Hãy thay thế "YOUR_DISCORD_WEBHOOK_URL" bằng URL webhook thực sự của bạn.
      */
      function notifyDiscord(message) {
        var webhookUrl = "https://discord.com/api/webhooks/1379029584976154736/sHOFSSQRBxwqdTaAeZLkuVZssU0-bf_xJV3L0SLkLOH3G278ZfOY90merIwXjga7VgC2"; // THAY CHỈNH URL ở đây
        fetch(webhookUrl, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ content: message })
        })
        .then(response => {
          console.log("Discord notification sent:", response);
        })
        .catch(error => {
          console.error("Error sending Discord notification:", error);
        });
      }
      
      // Khi tải lại trang, luôn hiện phần nhập tên và ẩn phần game
      window.onload = function() {
        document.getElementById("inputArea").style.display = "block";
        document.getElementById("gameArea").style.display = "none";
      }
    </script>
  </body>
</html>
