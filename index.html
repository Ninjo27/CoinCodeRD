<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Nh·∫≠n Qu√† Xem Qu·∫£ng C√°o & Quay S·ªë</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #f4f4f4;
      padding: 50px;
    }
    input, button {
      font-size: 18px;
      padding: 10px 15px;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin-top: 10px;
    }
    button {
      background-color: #28a745;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:disabled {
      background-color: gray;
    }
    #status {
      margin-top: 20px;
      font-size: 18px;
      color: #0033cc;
    }
    
    /* Hi·ªáu ·ª©ng Spinner */
    .spinner {
      border: 8px solid #f3f3f3;
      border-top: 8px solid #3498db;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      animation: spin 2s linear infinite;
      margin: 20px auto;
      display: none;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Hi·ªáu ·ª©ng fade-in cho th√¥ng b√°o */
    .fade-in {
      animation: fadeIn 1.5s ease-in-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
  </style>
</head>
<body>
  <h1>üéÅ Nh·∫≠n Qu√† Xem Qu·∫£ng C√°o v√† Quay S·ªë üéÅ</h1>

  <!-- Khu v·ª±c nh·∫≠p t√™n ban ƒë·∫ßu -->
  <div id="inputArea">
    <input type="text" id="playerName" placeholder="T√™n Minecraft c·ªßa b·∫°n">
    <br>
    <button onclick="saveName()">X√°c nh·∫≠n T√™n</button>
  </div>

  <!-- Khu v·ª±c game: hi·ªÉn th·ªã t√™n ng∆∞·ªùi ch∆°i v√† n√∫t quay -->
  <div id="gameArea" style="display:none;">
    <p><strong>T√™n c·ªßa b·∫°n:</strong> <span id="displayName"></span></p>
    <button id="rollButton" onclick="watchAdAndRoll()">Quay Ng·∫´u Nhi√™n</button>
    <!-- Ph·∫ßn hi·ªáu ·ª©ng spinner -->
    <div id="spinner" class="spinner"></div>
    <div id="status"></div>
  </div>

  <script>
    // L∆∞u t√™n ng∆∞·ªùi ch∆°i v√† chuy·ªÉn sang khu v·ª±c quay s·ªë
    function saveName() {
      const name = document.getElementById("playerName").value.trim();
      if (!name) {
        alert("‚ùó Vui l√≤ng nh·∫≠p t√™n Minecraft.");
        return;
      }
      localStorage.setItem("playerName", name);
      showGameSection();
    }

    // Hi·ªÉn th·ªã khu v·ª±c game n·∫øu ƒë√£ c√≥ t√™n ng∆∞·ªùi ch∆°i
    function showGameSection() {
      const name = localStorage.getItem("playerName");
      if (name) {
        document.getElementById("inputArea").style.display = "none";
        document.getElementById("gameArea").style.display = "block";
        document.getElementById("displayName").innerText = name;
      }
    }

    // H√†m th·ª±c hi·ªán qu√° tr√¨nh xem qu·∫£ng c√°o, hi·ªÉn th·ªã hi·ªáu ·ª©ng, v√† quay s·ªë
    function watchAdAndRoll() {
      const playerName = localStorage.getItem("playerName");
      if (!playerName) return;
      
      // M·ªü qu·∫£ng c√°o (m·ªói l·∫ßn quay ƒë·ªÅu y√™u c·∫ßu ph·∫£i xem qu·∫£ng c√°o)
      window.open("https://favourableafter.com/a27wdsgvkg?key=a17d0d294dc6fb83b60c99ae9f8203d4", "_blank");
      
      const rollButton = document.getElementById("rollButton");
      rollButton.disabled = true;
      rollButton.innerText = "ƒêang xem qu·∫£ng c√°o...";
      
      // Hi·ªÉn th·ªã spinner ƒë·ªÉ tƒÉng c·∫£m gi√°c h·ªìi h·ªôp
      document.getElementById("spinner").style.display = "block";
      document.getElementById("status").innerText = "‚è≥ Vui l√≤ng ch·ªù 15 gi√¢y...";
      
      // Sau 15 gi√¢y, sau khi qu·∫£ng c√°o "xem xong"
      setTimeout(() => {
        // ·∫®n spinner
        document.getElementById("spinner").style.display = "none";
        
        // Quay s·ªë v·ªõi t·ªâ l·ªá tr√∫ng 1/20
        const randomNumber = Math.floor(Math.random() * 20);
        
        if (randomNumber === 0) {
          // TH·∫ÆNG: G·ª≠i th√¥ng tin qua webhook Discord
          document.getElementById("status").innerHTML = "<span class='fade-in'>‚úÖ Ch√∫c m·ª´ng, b·∫°n ƒë√£ tr√∫ng th∆∞·ªüng!</span>";
          fetch("https://discord.com/api/webhooks/1378766894030393395/bPVZ8AMpX1woGC16YxW8j9OV4cpDtqA14P1etqjMtyfPCWL0YnDe61M6GqWgQEJBZc3i", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              content: `Ng∆∞·ªùi ch∆°i **${playerName}** ƒë√£ tr√∫ng th∆∞·ªüng`
            })
          })
          .then(() => {
            document.getElementById("status").innerHTML += " (Th√¥ng tin ƒë√£ ƒë∆∞·ª£c g·ª≠i qua Discord.)";
          })
          .catch(() => {
            document.getElementById("status").innerHTML += " (G·ª≠i qua Discord th·∫•t b·∫°i.)";
          });
        } else {
          // THUA: Th√¥ng b√°o kh√¥ng tr√∫ng th∆∞·ªüng
          document.getElementById("status").innerHTML = "<span class='fade-in'>‚ùå R·∫•t ti·∫øc, b·∫°n kh√¥ng tr√∫ng th∆∞·ªüng. H√£y th·ª≠ l·∫°i!</span>";
        }

        // Cho ph√©p quay l·∫°i
        rollButton.disabled = false;
        rollButton.innerText = "Quay Ng·∫´u Nhi√™n L·∫°i";
      }, 15000);
    }

    // Ki·ªÉm tra n·∫øu ƒë√£ l∆∞u t√™n tr∆∞·ªõc ƒë√≥ ƒë·ªÉ t·ª± ƒë·ªông hi·ªán khu v·ª±c game
    window.onload = function() {
      showGameSection();
    };
  </script>
</body>
</html>
