<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Nh·∫≠n Qu√† Xem Qu·∫£ng C√°o & Quay S·ªë</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #f4f4f4;
      padding: 50px;
    }
    input, button {
      font-size: 18px;
      padding: 10px 15px;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin-top: 10px;
    }
    button {
      background-color: #28a745;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:disabled {
      background-color: gray;
    }
    #status {
      margin-top: 20px;
      font-size: 18px;
      color: #0033cc;
    }
    
    /* Hi·ªáu ·ª©ng fade-in cho th√¥ng b√°o */
    .fade-in {
      animation: fadeIn 1.5s ease-in-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    /* Style cho slot machine effect */
    #slotMachine {
      font-size: 60px;
      margin: 30px auto;
      display: none;
    }
  </style>
</head>
<body>
  <h1>üéÅ Nh·∫≠n Qu√† Xem Qu·∫£ng C√°o v√† Quay S·ªë üéÅ</h1>

  <!-- Khu v·ª±c nh·∫≠p t√™n ban ƒë·∫ßu -->
  <div id="inputArea">
    <input type="text" id="playerName" placeholder="T√™n Minecraft c·ªßa b·∫°n">
    <br>
    <button onclick="saveName()">X√°c nh·∫≠n T√™n</button>
  </div>

  <!-- Khu v·ª±c game: hi·ªÉn th·ªã t√™n ng∆∞·ªùi ch∆°i v√† c√°c n√∫t t∆∞∆°ng t√°c -->
  <div id="gameArea" style="display:none;">
    <p><strong>T√™n c·ªßa b·∫°n:</strong> <span id="displayName"></span></p>
    
    <!-- N√∫t ƒë·ªÉ m·ªü qu·∫£ng c√°o -->
    <button id="adButton" onclick="watchAd()">Xem Qu·∫£ng C√°o</button>
    <!-- N√∫t ƒë·ªÉ quay: ban ƒë·∫ßu ·∫©n, s·∫Ω hi·ªán sau khi xem qu·∫£ng c√°o xong -->
    <button id="spinButton" onclick="spinSlot()" style="display:none;">B·∫•m ƒê·ªÉ Quay</button>
    
    <!-- Container hi·ªÉn th·ªã hi·ªáu ·ª©ng slot machine -->
    <div id="slotMachine"></div>
    
    <div id="status"></div>
  </div>

  <script>
    // L∆∞u t√™n ng∆∞·ªùi ch∆°i v√† chuy·ªÉn sang giao di·ªán game
    function saveName() {
      const name = document.getElementById("playerName").value.trim();
      if (!name) {
        alert("‚ùó Vui l√≤ng nh·∫≠p t√™n Minecraft.");
        return;
      }
      localStorage.setItem("playerName", name);
      showGameSection();
    }
    
    // Hi·ªÉn th·ªã khu v·ª±c game n·∫øu ƒë√£ c√≥ t√™n ng∆∞·ªùi ch∆°i
    function showGameSection() {
      const name = localStorage.getItem("playerName");
      if (name) {
        document.getElementById("inputArea").style.display = "none";
        document.getElementById("gameArea").style.display = "block";
        document.getElementById("displayName").innerText = name;
      }
    }
    
    // M·ªü qu·∫£ng c√°o; sau 7 gi√¢y, ·∫©n n√∫t "Xem Qu·∫£ng C√°o" v√† hi·ªÉn th·ªã n√∫t "B·∫•m ƒê·ªÉ Quay"
    function watchAd() {
      const playerName = localStorage.getItem("playerName");
      if (!playerName) return;
      
      // M·ªü qu·∫£ng c√°o trong tab/window m·ªõi
      window.open("https://favourableafter.com/a27wdsgvkg?key=a17d0d294dc6fb83b60c99ae9f8203d4", "_blank");
      
      const adButton = document.getElementById("adButton");
      adButton.disabled = true;
      adButton.innerText = "ƒêang xem qu·∫£ng c√°o...";
      
      document.getElementById("status").innerText = "‚è≥ Vui l√≤ng ch·ªù 5 gi√¢y...";
      
      setTimeout(() => {
        // Sau 5 gi√¢y, chuy·ªÉn sang b∆∞·ªõc quay th∆∞·ªüng
        document.getElementById("status").innerText = "";
        adButton.style.display = "none";
        document.getElementById("spinButton").style.display = "inline-block";
      }, 5000);
    }
    
    // Th·ª±c hi·ªán hi·ªáu ·ª©ng quay ki·ªÉu m√°y slot v√† x√°c ƒë·ªãnh k·∫øt qu·∫£
    function spinSlot() {
      const playerName = localStorage.getItem("playerName");
      if (!playerName) return;
      
      const spinButton = document.getElementById("spinButton");
      spinButton.disabled = true;
      spinButton.innerText = "ƒêang quay...";
      
      const slotMachine = document.getElementById("slotMachine");
      slotMachine.style.display = "block";
      
      // M·∫£ng c√°c bi·ªÉu t∆∞·ª£ng ƒë·ªÉ t·∫°o hi·ªáu ·ª©ng quay
      const symbols = ["üçí", "üçã", "üçä", "üçá", "üçâ", "‚≠ê", "üîî"];
      
      // Hi·ªáu ·ª©ng quay: c·∫≠p nh·∫≠t bi·ªÉu t∆∞·ª£ng m·ªói 100ms
      let spinInterval = setInterval(() => {
        slotMachine.innerText = symbols[Math.floor(Math.random() * symbols.length)];
      }, 100);
      
      // Sau 3 gi√¢y, d·ª´ng hi·ªáu ·ª©ng quay v√† x√°c ƒë·ªãnh k·∫øt qu·∫£
      setTimeout(() => {
        clearInterval(spinInterval);
        
        // Quay s·ªë v·ªõi t·ªâ l·ªá tr√∫ng 1/20
        const outcome = Math.floor(Math.random() * 20);
        if (outcome === 0) {
          // N·∫øu tr√∫ng th∆∞·ªüng: hi·ªÉn th·ªã bi·ªÉu t∆∞·ª£ng chi·∫øn th·∫Øng v√† g·ª≠i th√¥ng ƒëi·ªáp qua Discord Webhook
          slotMachine.innerText = "üí∞";
          document.getElementById("status").innerHTML = "<span class='fade-in'>‚úÖ Ch√∫c m·ª´ng, b·∫°n ƒë√£ tr√∫ng th∆∞·ªüng!</span>";
          fetch("https://discord.com/api/webhooks/1378766894030393395/bPVZ8AMpX1woGC16YxW8j9OV4cpDtqA14P1etqjMtyfPCWL0YnDe61M6GqWgQEJBZc3i", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              content: `Ng∆∞·ªùi ch∆°i **${playerName}** ƒë√£ tr√∫ng th∆∞·ªüng`
            })
          })
          .then(() => {
            // C√≥ th·ªÉ c·∫≠p nh·∫≠t tr·∫°ng th√°i g·ª≠i th√†nh c√¥ng (n·∫øu c·∫ßn)
          })
          .catch(() => {
            // X·ª≠ l√Ω n·∫øu g·ª≠i webhook th·∫•t b·∫°i
          });
        } else {
          // N·∫øu kh√¥ng tr√∫ng th∆∞·ªüng
          slotMachine.innerText = "‚ùå";
          document.getElementById("status").innerHTML = "<span class='fade-in'>‚ùå R·∫•t ti·∫øc, b·∫°n kh√¥ng tr√∫ng th∆∞·ªüng. H√£y th·ª≠ l·∫°i!</span>";
        }
        
        // Reset giao di·ªán: ·∫©n n√∫t quay v√† slot machine, hi·ªÉn th·ªã l·∫°i n√∫t "Xem Qu·∫£ng C√°o" ƒë·ªÉ th·ª±c hi·ªán v√≤ng quay m·ªõi
        spinButton.disabled = false;
        spinButton.innerText = "Quay L·∫°i";
        spinButton.style.display = "none";
        slotMachine.style.display = "none";
        const adButton = document.getElementById("adButton");
        adButton.style.display = "inline-block";
        adButton.disabled = false;
        adButton.innerText = "Xem Qu·∫£ng C√°o";
      }, 3000);
    }
    
    window.onload = function() {
      showGameSection();
    };
  </script>
</body>
</html>
